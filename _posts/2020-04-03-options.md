---
layout: post
title: Git
---

# git异闻录

## 1. get start

### 1.1 关于版本控制

> 什么是版本控制？我为什么要关心它呢？版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。在本书所展示的例子中，我们仅对保存着软件源代码的文本文件作版本控制管理，但实际上，你可以对任何类型的文件进行版本控制。
> 如果你是位图形或网页设计师，可能会需要保存某一幅图片或页面布局文件的所有修订版本（这或许是你非常渴望拥有的功能）。采用版本控制系统（VCS）是个明智的选择。有了它你就可以将某个文件回溯到之前的状态，甚至将整个项目都回退到过去某个时间点的状态。你可以比较文件的变化细节，查出最后是谁修改了哪个地方，从而找出导致怪异问题出现的原因，又是谁在何时报告了某个功能缺陷等等。使用版本控制系统通常还意味着，就算你乱来一气把整个项目中的文件改的改删的删，你也照样可以轻松恢复到原先的样子。但额外增加的工作量却微乎其微。

版本控制的时间变迁可大概如下：

1. 本地版本控制系统
   ![Alt](https://img-blog.csdnimg.cn/img_convert/ed854e0f935e4ccc09283c73a2331dc3.png)
2. 集中化的版本控制系统
   ![Alt](https://img-blog.csdnimg.cn/img_convert/0018cfe2b1cd25c38048868bb260a31f.png)
3. 分布式版本控制系统
   ![Alt](https://img-blog.csdnimg.cn/img_convert/82fa87815d3ccf547a2ac4b8b3538068.png)

### 1.2 git特征

- 直接记录快照，而非差异比较
- 近乎所有操作都是本地执行
- 时刻保持数据完整性
- 多数操作仅添加数据

#### git文件的三种状态

>对于任何一个文件，在 Git 内都只有三种状态：已提交（committed），已修改（modified）和已暂存（staged）。已提交表示该文件已经被安全地保存在本地数据库中了；已修改表示修改了某个文件，但还没有提交保存；已暂存表示把已修改的文件放在下次提交时要保存的清单中。
>由此我们看到 Git 管理项目时，文件流转的三个工作区域：Git 的工作目录，暂存区域，以及本地仓库。
>![Alt](https://img-blog.csdnimg.cn/img_convert/b15e469ba026af9fe9d85ffc22af5dd0.png)

## 1.3 安装git

==以本机ubuntu 19.10为例==

```
$ apt-get install git
```

运行以上命令，等待完成之后即可使用git啦.


## 1.4 使用前配置

### 用户信息

第一个要配置的是你个人的用户名称和电子邮件地址。这两条配置很重要，每次 Git 提交时都会引用这两条信息，说明是谁提交了更新，所以会随更新内容一起被永久纳入历史记录：

```
$ git config --global user.name "John Doe"
$ git config --global user.email johndoe@example.com
```

  ### 文本编辑器

  接下来要设置的是默认使用的文本编辑器。Git 需要你输入一些额外消息的时候，会自动调用一个外部文本编辑器给你用。默认会使用操作系统指定的默认编辑器，一般可能会是 Vi 或者 Vim。如果你有其他偏好，比如 Emacs 的话，可以重新设置：

 ```
 $ git config --global core.editor vim
 ```

### 查看配置信息

要检查已有的配置信息，可以使用 ==git config --list== 命令


_End of this chapter_

---

## 2. git basic

### 2.1 取得项目的 Git 仓库

>有两种取得 Git 项目仓库的方法。第一种是在现存的目录下，通过导入所有文件来创建新的 Git 仓库。第二种是从已有的 Git 仓库克隆出一个新的镜像仓库来。

#### 在工作目录中初始化新仓库

要对现有的某个项目开始用 Git 管理，只需到此项目所在的目录，执行：

```
$ git init
$ git add *
$ git commit -m 'first edition'
```

如果需要从现有的仓库clone一个仓库，命令如下：

```
$ git clone git://github.com/xxxxx/xxx.git
```

也可以在后面加上名字实现仓库命名，否则将默认为项目名称。

### 2.2 记录每次更新到仓库

##### 检查当前文件状态

>要确定哪些文件当前处于什么状态，可以用 git status 命令。如果在克隆仓库之后立即执行此命令，会看到类似这样的输出：

```
$ git status
    # On branch master
    nothing to commit (working directory clean)
```

#### 跟踪新文件

>使用命令 git add 开始跟踪一个新文件。所以，要跟踪 README 文件，运行：

```
$ git add README
$ git status
    # On branch master
    # Changes to be committed:
    # (use "git reset HEAD <file>..." to unstage)
    #
    # new file: README
    #
```

#### 暂存已修改文件

使用如下命令：

```
$ git add 文件名
```

#### 查看已暂存和未暂存的更新

查看修改过的文件

```
$ git status
```

运行 git diff 看暂存前后的变化：此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。

```
$ git diff
```

用 git diff --cached 查看已经暂存起来的变化：已经暂存起来的文件和上次提交时的快照之间的差异

```
$ git diff --cached
```


##### 提交更新

```
$ git commit
```

这种方式会启动文本编辑器以便输入本次提交的说明

#### 跳过使用暂存区域

>尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。Git 提供了一个跳过使用暂存区域的方式，只要在提交的时候，给 git commit 加上 -a 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤

#### 移除文件

>要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。可以用 git rm 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。
>如果只是简单地从工作目录中手工删除文件，运行 git status 时就会在 “Changes not staged for commit” 部分（也就是未暂存清单）看到


### 2.3 查看提交历史

在提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，可以使用 git log 命令查看。


### 2.4 撤消操作

有时候我们提交完了才发现漏掉了几个文件没有加，或者提交信息写错了。想要撤消刚才的提交操作，可以使用 --amend 选项重新提交：

```
$ git commit --amend
```

#### 查看当前的远程库

要查看当前配置有哪些远程仓库，可以用 git remote 命令，它会列出每个远程库的简短名字。在克隆完某个项目后，至少可以看到一个名为 origin 的远程库，Git 默认使用这个名字来标识你所克隆的原始仓库

#### 添加远程仓库

要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用，运行 git remote add [shortname] [url]

#### 查看远程仓库信息

我们可以通过命令 git remote show [remote-name] 查看某个远程仓库的详细信息